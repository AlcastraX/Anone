<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Math Training</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            position:relative;
            height:100vh;
            width:100vw;
            background-color: #c0c0c0;
            display:flex;
            justify-content: center;
            align-items: center;
            overflow:hidden;
        }
        .Pamphlet {
            width:46.875rem;
            aspect-ratio: 2/1.2;
            position:absolute;
            top:57.5%;
            left:50%;
            border-top: 2px solid white;
            border-left: 2px solid white;
            border-right: 2px solid #3a3a3a;
            border-bottom: 2px solid #3a3a3a;
            filter: blur(0.5px);
            transform: translate(-50%, -50%);
            background-color:#b5b5b5;
            box-shadow: 3px 3px 0px hsl(0, 0%, 10%);
        }
        .sec1, .sec2 {
            width:100%;
            height:50%;
            box-sizing: border-box;
        }
        .sec1 {
            border-radius: 15px 15px 0 0 ;
            position:relative;
            display:flex;
            justify-content:flex-start;
            z-index:-1;
        }
        .sec2 {
            border-radius: 0 0 15px 15px;
            position:relative;
        }
        .V1, .V2 {
            width:50%;
            height:100%;
            box-sizing: border-box;
            position:relative;
        }
        .N1 {
            width:30%;
            aspect-ratio: 1/1;
            background-color: #00008017;
            border:2px solid;
            border-color: white #3a3a3a #3a3a3a white;
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(10%, -50%);
            box-shadow:2px 2px 0px hsl(0, 0%, 20%);
            display:flex;
            justify-content: center;
            align-items:center;
            font-size: 3rem;
        }
        .V1::before{
            content: attr(data-symbol);
            position:absolute;
            top:50%;
            left:100%;
            transform: translate(-50%, -50%);
            font-size:5rem;
        }
        .N2 {
            width:30%;
            aspect-ratio:1/1;
            background-color: #00008017;
            border:2px solid;
            border-color: white #3a3a3a #3a3a3a white;
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-110%, -50%);
            display:flex;
            justify-content: center;
            align-items:center;
            font-size: 3rem;
            box-shadow:2px 2px hsl(0, 0%, 20%);
            
        }
        .Rbutton {
            width:33.3%;
            height:17.7%;
            background-color: #00008017;
            border:solid;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            cursor: pointer;
            align-self:center;
            font-family: Tahoma, Verdana, "MS Sans Serif", Arial, sans-serif;
            position:absolute;
            top:18%;
            left:50%;
            transform: translate(-50%, -50%);
        }
        #BStart:hover {
            background-color: #00008040;
        }
        #BStart:active {
            box-shadow: inset 2px 2px black;
        }
        .TIMER {
            position:absolute;
            top:2.666%;
            left:50%;
            transform: translateX(-50%);
            font-size: 1.4rem;
            font-weight:bold;
            width:98%;
            height:clamp(0.8rem , 1.5rem, 2rem);
            text-align: center;
            background-color:#010169;
            color:white;
            box-shadow:2px 2px black;

        }
        .Settings {
            position:absolute;
            display:flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%);
            width:50rem;
            aspect-ratio: 2/1.2;
            background:#c0c0c0;
            border-top:2px solid white;
            border-left:2px solid white;
            border-right:2px solid #3a3a3a;
            border-bottom:2px solid #3a3a3a;
            z-index:50;
            filter:blur(0.5px); 
            display:none;
        }
        .Input {
            width:40%;
            aspect-ratio: 10/1;
            border:2px solid black;
            box-shadow: inset 2px 2px 5px #3a3a3a, inset -2px -2px 5px white;
            font-size: 1.2rem;
            padding:5px;
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%);
        }
        .jittered {
            animation: jitter 0.15s ease-in infinite;
        }
        .jitter-centered {
            animation: jitter-centered 0.15s ease-in infinite;
        }
        .Casual, .Intermediate, .Challenge {
            align-self:flex-start;
            width:15.204rem;
            height:2.5rem;
            border:2px solid black;
            top:10px;
            cursor:pointer;
            background-color: #00008017;
            border:solid;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            
        }
        .Mastery {
            position:absolute;
            top:125%;
            width:100%;
            border:2px solid black;
            height:2.5rem;
            cursor:pointer;
            background-color: #00008017;
            border:solid;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            }
         * {
         font-family: 'Algerian', serif;
        }
         body.AllowJitter button:hover {
            background-color: #00008040;
            animation: jitter 0.1s infinite;
        }
         body.AllowJitter button:active {
            box-shadow: inset 2px 2px black;
            transform:translate(-1%,-1%)
        }
        #BStart:hover {
            background-color: #00008040;
            animation: jitter-centered 0.1s infinite;
        }
        .Difficulties { 
            position:absolute;
            top:-25%;
            left:50%;
            transform:translateX(-50%);
            display:flex;
            gap:10px;
            z-index:2;
            width:fit-content;
        }
        .Difficulties::before{
            content: "SELECT DIFFICULTY";
            position:absolute;
            top:-100%;
            left:50%;
            transform: translate(-50%,-50%);
            white-space:nowrap;
            font-size:2.7rem;
            z-index:3;
            font-weight:bold;
            overflow:visible;
            
        }
        .Overlay {
            width:100vw;
            height:100vh;
            margin:0;
            padding:0;
            background-color: #777777;
            opacity:0.4;
            filter:blur(0.7px);
            z-index:51;
            pointer-events:none;
            position:fixed;
            inset:0;
        }
        @keyframes jitter {
            0%{ transform:translate(-1px, 1px)}
            12.5%{transform:translate(1px, 0px)}
            25%{transform:translate(-1px, -1px)}
            37.5%{transform:translate(0px, 1px)}
            50%{transform:translate(1px, -1px)}
            62.5%{transform:translate(-1px, 0px)}
            75%{transform:translate(1px, 1px)}
            87.5%{transform:translate(0px, -1px)}
            100%{transform:translate(-1px, 1px)}
        }
        @keyframes jitter-centered {
            0%{ transform: translate(-50%, -50%) translate(-2px, 2px); }
            12.5%{ transform: translate(-50%, -50%) translate(2px, 0px); }
            25%{ transform: translate(-50%, -50%) translate(-2px, -2px); }
            37.5%{ transform: translate(-50%, -50%) translate(0px, 2px); }
            50%{ transform: translate(-50%, -50%) translate(2px, -2px); }
            62.5%{ transform: translate(-50%, -50%) translate(-2px, 0px); }
            75%{ transform: translate(-50%, -50%) translate(2px, 2px); }
            87.5%{ transform: translate(-50%, -50%) translate(0px, -2px); }
            100%{ transform: translate(-50%, -50%) translate(-2px, 2px); }
        }
        .Streak {
            position:absolute;
            top:91%;
            left:50%;
            transform:translateX(-50%);
            width:98%;
            text-align:center;
            font-size:1.5rem;
            font-weight:bold;
            background-color:#010169;
            color:white;
            box-shadow:2px 2px black;
            height:clamp(0.8rem , 1.5rem, 2rem);
        }
        .Hasil {
            width:95%;
            height:clamp(0.8rem , 1.5rem, 2rem);
            position:absolute;
            top:55%;
            left:50%;
            transform: translateX(-50%);
            text-align: center;
            font-size:1.5rem;   
            font-family:'Algerian', serif;    
        }       
         .DONE{
            font-size: 1rem;
            text-align:left;
            background-color:#000080d5;
            width: 98%;
            color:white;
            box-shadow:2px 2px black;
            padding-left:0.4rem
            
        }
        .Main-content {
            width:100%;
            flex:1;
            display:flex;
            flex-direction: column;
            background:#c0c0c0;
        }
        .Settings-Section1, .Settings-Section2 {
            width:100%;
            background:#c0c0c0;
            display:flex;
            flex-direction: column;
            justify-content:flex-start;
            font-size:1.5rem;
        }
        .control1 {
            display:flex;
            flex-direction: column;
            gap:1rem;
            position:relative;
            overflow:visible;
        }
        .Settings-icon {
            position:absolute;
            top:0%;
            right:0%;
            width:5rem;
            aspect-ratio:1/1;
            border:2px solid black;
            cursor:pointer;
            z-index:52;
            border:none;
        }
        .Settings-icon:hover {
            filter:brightness(120%);
            transform-origin:center;
            animation: rotate 0.5s linear infinite;
        }
        .Settings-icon:active {
            filter:brightness(80%);
            
            
        }
        @keyframes rotate {
            from {transform:rotate(0deg)}
            to {transform:rotate(180deg)}
        }
        .Settings-Section1 {
            height: 60%;
            display:flex;
        }
        .Btn-Place {
            align-self:center;
            display:flex;
            flex-direction: column;
            gap:calc(1rem - 2px);
            position:absolute;
            top:0%;
            left:35%;
            transform:translateX(-50%)
        }
        .Settings-Section2 {
            height: 40%;
            font-size:3rem;
            align-items:center;
            justify-content: center;
            gap:0.5rem;
        }
        .display {
            display:flex;
        }
        .Mode {
            width:75%;
            height:clamp(0.8rem, 2rem, 2rem);
            margin:0;
            background: linear-gradient(
             to right,
             #00008000 0%,
             #00008017 40%,
             #00008040 50%,
             #00008017 60%,
             #00008000 100%);
            border:solid;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            cursor: pointer;
        }
        .SS2-head {
            margin:auto;
            font-weight:bold;
        }
        
        .Btn-Place {
            display: flex;
            gap: 1rem;
            background: #c0c0c0;
        }

/* 1. Hide the actual checkbox */
        .Onoff {
            display: none;
        }

        .Onoff + label {
            display: inline-block;
            width:5rem;
            height:2rem;
            background: hsl(0, 0%, 75%);
            cursor: pointer;
            user-select: none;
            border:2px solid;
            box-sizing:border-box;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            margin:0;

        }
        label {
            position:relative;
        }
        .Onoff:checked + label {
            border-top: 2px solid #000000;
            border-left: 2px solid #000000;
            border-right: 2px solid #ffffff;
            border-bottom: 2px solid #ffffff;
            background: #d0d0d0; 
        }
        label::after {
            content:"";
            position:absolute;
            background: hsl(0, 0%, 60%);
            width:1.6rem;
            aspect-ratio:1/1;
            left:1px;
            top:50%;
            transform: translateY(-50%)
        }
        @media (max-width: 768px) {
            .Pamphlet {
                width:90vw;
                aspect-ratio: 2/1.2;
            }
            .N1, .N2 {
                font-size: 2rem;
                width:27.5%;
                aspect-ratio: 1/1;
            }
            .V1::before {
                font-size: 3rem;
            }
            .Rbutton {
                width:30%;
                height:1.5rem;
                font-size: 0.8rem;
                top:12.5%
            }
            .Input {
                width:60%;
                height:10%;
                font-size: 1rem;
            }
            .TIMER, .Streak {
                font-size: 0.75rem;
                height:0.8rem
            }
            .Hasil {
                font-size: 0.8rem;
                top:52%
            }
            .Difficulties::before {
                font-size: 1.5rem;
            }
            .Difficulties {
                gap:5px;
                top: -40%
            }
            .Casual, .Intermediate, .Challenge {
                width:30vw;
                height:1.9rem;
                font-size: 0.8rem;
            }
            .Mastery {
                width:100%;
                height:1.9rem;
                font-size: 0.8rem;
            }
            @media (max-width: 400px) {
                
                .Casual, .Intermediate, .Challenge {
                    width:28vw;
                    height:25px;
                    font-size: 0.59rem;
                }
                .Mastery {
                    height:25px;
                    font-size: 0.59rem;
                    width:100%;
                }
                .V1::before {
                    font-size: 2rem;
                }
            }
            @media (orientation: landscape){
                .Pamphlet {
                    width:95vw;
                    height:55vh;
                    top:90%;
                }
                .N1, .N2 {
                    font-size: 1.5rem;
                    width:25%;
                    aspect-ratio: 1/1;
                }
                .Rbutton {
                    width:25%;
                    height:1.2rem;
                    font-size: 0.7rem;
                    top:15%
                }
                .Input {
                    width:50%;
                    height:8%;
                    font-size: 0.8rem;
                }
                .Hasil {
                    font-size: 0.7rem;
                    top:50%
                }
            }
        }
    </style>
    </head>
    <body>
        <div class="Overlay"></div>
        <img class="Settings-icon" src="Settings.png" alt="Settings">
        <div class="Pamphlet">
            <div class="Difficulties">
            <button class="Casual">CASUAL</button>
            <button class="Intermediate">INTERMEDIATE</button>
            <button class="Challenge">CHALLENGE</button>
            <button class="Mastery">Mastery</button>
        </div>
            <div class="Streak">STREAK:</div>
            <div class="sec1">
                <div class="TIMER">TIME LEFT:</div>
                <div class="V1"><div class="N1"></div></div>
                <div class="V2"><div class="N2"></div></div>
            </div>
             <div class="sec2">
                <button id="BStart" class="Rbutton">START</button>
               <input class="Input" autofocus placeholder="Type your answer here">
               <p class="Hasil"></p>
            </div>
        </div>
        <div class="Settings">
           <div class="DONE"> <h1 style="margin:0;">SETTINGS</h1></div>
           <div class="Main-content">
            <div class="Settings-Section1">
                <div class="control1">
                <div class="toggle-jitter" style="display:flex">Allow Jitter:</div>
                <div class="toggle-Overlay" style="display:flex">Allow Overlay:</div>
                <div class="toggle-negative" style="display:flex">Allow Negative:</div>
                <div class="toggle-decimal" style="display:flex">Allow Decimal:</div>
                <div class="Btn-Place">
                <input id="AJB" class="Onoff" type="checkbox">
                <label for="AJB"></label>

                <input id="AOB" class="Onoff" type="checkbox">
                <label for="AOB"></label>

                <input id="ANB" class="Onoff" type="checkbox">
                <label for="ANB"></label>

                <input id="ADB" class="Onoff" type="checkbox">
                <label for="ADB"></label>
                </div>
                <div style="font-size:3rem" class="SS2-head">SELECT MODE:</div>  
            </div>
            </div>
            <div class="Settings-Section2">
                
                <button id="Addition" class="Mode">ADDITION</button>
                <button id="Subtraction" class="Mode">SUBTRACTION</button>
                <button id="Multiplication" class="Mode">MULTIPLICATION</button>
                <button id="Division" class="Mode">DIVISION</button>
            </div>
           </div>
        </div>
        <script>
            const body = document.body;
            const V1 = document.querySelector('.V1')
            const Casual = document.querySelector('.Casual')
            const Intermediate = document.querySelector('.Intermediate')
            const Challenge = document.querySelector('.Challenge')
            const Mastery = document.querySelector('.Mastery')
            const Input = document.querySelector(".Input")
            const Rbutton = document.querySelector(".Rbutton")
            const hasil = document.querySelector(".Hasil")
            const TIMER = document.querySelector('.TIMER')
            const SD = document.querySelector('.Streak')
            const AJ = document.getElementById('AJB')
            const AO = document.getElementById('AOB')
            const AN = document.getElementById('ANB')
            const AD = document.getElementById('ADB')
            const Addition = document.getElementById('Addition')
            const Subtraction = document.getElementById('Subtraction')
            const Multiplication = document.getElementById('Multiplication')
            const Division = document.getElementById('Division')
            const Settings = document.querySelector('.Settings')
            const Setting_gear = document.querySelector('.Settings-icon')
            const DiffButtons = document.querySelector('.Casual, .Intermediate, .Challenge, .Mastery')
            let AllowOverlay = false;
            let Difficulty = "None"
            let time = 10;
            let Streak = 0;
            Input.disabled = true;
            let CIC = 1
            let NOO = 0
            let s123 = 7
                Setting_gear.addEventListener("click", () => {
                    Settings.classList.toggle("display")
                })
            Casual.addEventListener("click", ()=>{
                Difficulty = "Casual"
                Rbutton.disabled = false
            })
            Intermediate.addEventListener("click", ()=>{
                Difficulty = "Intermediate"
                Rbutton.disabled = false
            })
            Challenge.addEventListener("click", ()=>{
                Difficulty = "Challenge"
                Rbutton.disabled = false
            })
            Mastery.addEventListener("click", ()=>{
                Difficulty = "Mastery"
                Rbutton.disabled = false
            })
            Rbutton.disabled = CIC < 2
            function Exponentia() {
                if (Streak === 0){
                    CIC = 4
                    NOO = 500
                    return
                }        
                CIC = Math.floor(Math.pow(2, Math.floor(Number(Streak/s123)) + 2))
                NOO = 500 + Streak * 50
            }
        let Modes = "MULTIPLICATION"
                    Addition.addEventListener("click", ()=>{ Modes = "ADDITION"})
                    Subtraction.addEventListener("click", ()=>{Modes = "SUBSTRACTION"})
                    Multiplication.addEventListener("click", ()=>{Modes = "MULTIPLICATION"})
                    Division.addEventListener("click", ()=>{Modes = "DIVISION"})
            function Randoms() {
                    const N1 = document.querySelector('.N1');
                    const N2 = document.querySelector('.N2');
                    N1.style.opacity = "1";
                    N2.style.opacity = "1";
                    const rando = Math.floor(Math.random() * CIC) + 1;
                    const rando2 = Math.floor(Math.random() * CIC) + 1;
                    N1.textContent = `${rando}`;
                    N2.textContent = `${rando2}`;
                    switch (Modes) {
                        case "ADDITION":
                            answer = rando + rando2;
                            V1.setAttribute("data-symbol", "+")
                            break;
                        case "SUBSTRACTION":
                            answer = Math.abs(rando - rando2); 
                            V1.setAttribute("data-symbol", "-") 
                            break;
                        case "MULTIPLICATION":
                            answer = rando * rando2;
                            V1.setAttribute("data-symbol", "X")
                            break;
                        case "DIVISION":
                            if (AD.checked) {
                                answer = parseFloat((rando / rando2).toFixed(2));
                            } else {
                                N1.textContent = `${rando*rando2}`;
                                answer = rando*rando2/rando2 ;
                            };
                            V1.setAttribute("data-symbol", "/")
                            break;
                    }
                    setTimeout(() => {
                        N1.textContent = "?";   
                        N2.textContent = "?";
                    }, NOO);
            }
            function DIFFICULTY()  {
                if (Modes ==="MULTIPLICATION" || Modes==="DIVISION"){
                if (Difficulty === "Casual") {
                    CIC = 25
                    NOO = 1000
                } else if (Difficulty === "Intermediate") {
                    CIC = 50
                    NOO = 1500
                } else if (Difficulty === "Challenge") {
                    CIC = 100
                    NOO = 2000
                } else if (Difficulty === "Mastery") {
                    Exponentia()
                }
            }
            else if(Modes === "ADDITION" || Modes ==="SUBSTRACTION"){
                if (Difficulty === "Casual") {
                    CIC = 100
                    NOO = 1000
                } else if (Difficulty === "Intermediate") {
                    CIC = 250
                    NOO = 1500
                } else if (Difficulty === "Challenge") {
                    CIC = 500
                    NOO = 2000
                } else if (Difficulty === "Mastery") {
                    Exponentia()
                }
            }
            }
            let answer;
            let timer;
            let counter = -1;
            body.classList.add("AllowJitter");
            AJ.addEventListener("change", () => {
                body.classList.toggle("AllowJitter");
            });
                Rbutton.addEventListener("click", () => {
                    Input.classList.add("jittered-centered");
                    counter++;
                    if (timer) {clearInterval(timer)}
                    Rbutton.textContent = "SUBMIT"
                    Rbutton.disabled = true;
                    Input.disabled = true;
                    if (Difficulty === "Challenge") 
                    {time = 15}
                    else if (Difficulty === "Mastery") 
                    {time = 10 + Math.floor(Number(Streak/s123)) * 2}
                    else {time = 10}
                    DIFFICULTY()
                    const Vinput = parseFloat(Input.value)
                    if (counter > 0) {
                        if (Vinput === answer) {
                            hasil.textContent = "CORRECT!"
                            if (Difficulty !== "Mastery"){Streak++;}
                            else {Streak = Streak + 1 + Math.floor(Number(Streak)/s123);}
                            SD.textContent = `STREAK: ${Streak}`
                        } else {
                            Streak = 0;
                            hasil.textContent = `WRONG! The correct answer was ${answer}.`
                            Input.disabled = true
                            TIMER.textContent = `GAME OVER`
                            Rbutton.textContent = "RESTART"
                            SD.textContent = ""
                        }
                    }
                    else{hasil.textContent = "GOOD LUCK! DIFFICULTY: " + Difficulty.toUpperCase() + " MODE: " + Modes.toUpperCase()}
                    Timer()
                    setTimeout(() => {
                        Randoms()
                        Input.value = ""        
                        hasil.textContent = ""
                        Rbutton.disabled = false
                        Input.disabled = false
                        Input.focus()
                        Rbutton.textContent = "SUBMIT"
                    }, 1000)
                    
                })
                Input.addEventListener("keydown", (event ) => {
                    if (event.key !== "Enter") return;
                    counter++;
                    if (timer) {clearInterval(timer)}
                    Rbutton.textContent = "SUBMIT"
                    Rbutton.disabled = true;
                    Input.disabled = true;
                    if (Difficulty === "Challenge") 
                    {time = 15}
                    else if (Difficulty === "Mastery") 
                    {time = 10 + Math.floor(Number(Streak/s123)) * 2}
                    else {time = 10}
                    DIFFICULTY()
                    const Vinput = parseFloat(Input.value)
                    if (counter > 0) {
                        if (Vinput === answer) {
                            hasil.textContent = "CORRECT!"
                            if (Difficulty !== "Mastery"){Streak++;}
                            else {Streak = Streak + 1 + Math.floor(Number(Streak)/s123);}
                            SD.textContent = `STREAK: ${Streak}`
                        } else {
                            Streak = 0;
                            hasil.textContent = `WRONG! The correct answer was ${answer}.`
                            Input.disabled = true
                            TIMER.textContent = `GAME OVER`
                            Rbutton.textContent = "RESTART"
                            SD.textContent = ""
                        }
                    }
                    else{hasil.textContent = "GOOD LUCK! DIFFICULTY: " + Difficulty.toUpperCase() + " MODE: " + Modes.toUpperCase()}
                    Timer()
                    setTimeout(() => {
                        Randoms()
                        Input.value = ""        
                        hasil.textContent = ""
                        Rbutton.disabled = false
                        Input.disabled = false
                        Input.focus()
                        Rbutton.textContent = "SUBMIT"
                    }, 1000)
                })
            function Timer() { 
                timer = setInterval(()=>{
                    TIMER.textContent = `TIME LEFT: ${time}s`
                    time--;
                    if (time < 0) {  
                        clearInterval(timer)
                        TIMER.textContent = `Time's Up! The correct answer was ${answer}.`
                       Input.disabled = true
                       Streak = 0;
                        setTimeout(() => {
                            if (Difficulty === "Challenge") 
                            {time = 15}
                            else if (Difficulty === "Mastery") 
                            {time = 10 + Math.floor(Number(Streak/s123)) * 2}
                             else {time = 10}
                            Input.value = ""
                            hasil.textContent = ""
                            Rbutton.disabled = false
                            Rbutton.textContent = "RESUME"
                        }, 1000)
                    }
                }, 1000) 
            }
            
        </script>
    </body>
</html> 
