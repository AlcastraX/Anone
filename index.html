<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physical Mathest</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            position:relative;
            height:100vh;
            width:100vw;
            background-color: #c0c0c0;
            display:flex;
            justify-content: center;
            align-items: center;
        }
        .Pamphlet {
            width:46.875rem;
            aspect-ratio: 2/1.2;
            position:absolute;
            top:57.5%;
            left:50%;
            border-top: 2px solid white;
            border-left: 2px solid white;
            border-right: 2px solid #3a3a3a;
            border-bottom: 2px solid #3a3a3a;
            filter: blur(0.5px);
            transform: translate(-50%, -50%);
            background-color:#b5b5b5;
            box-shadow: 3px 3px 0px hsl(0, 0%, 10%);
        }
        .sec1, .sec2 {
            width:100%;
            height:50%;
            box-sizing: border-box;
        }
        .sec1 {
            border-radius: 15px 15px 0 0 ;
            position:relative;
            display:flex;
            justify-content:flex-start;
            z-index:-1;
        }
        .sec2 {
            border-radius: 0 0 15px 15px;
            position:relative;
        }
        .V1, .V2 {
            width:50%;
            height:100%;
            box-sizing: border-box;
            position:relative;
        }
        .N1 {
            width:30%;
            aspect-ratio: 1/1;
            background-color: #00008017;
            border:2px solid;
            border-color: white #3a3a3a #3a3a3a white;
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(10%, -50%);
            box-shadow:2px 2px 0px hsl(0, 0%, 20%);
            display:flex;
            justify-content: center;
            align-items:center;
            font-size: 3rem;
        }
        .V1::before{
            content: "X";
            position:absolute;
            top:50%;
            left:100%;
            transform: translate(-50%, -50%);
            font-size:5rem;
        }
        .N2 {
            width:30%;
            aspect-ratio:1/1;
            background-color: #00008017;
            border:2px solid;
            border-color: white #3a3a3a #3a3a3a white;
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-110%, -50%);
            display:flex;
            justify-content: center;
            align-items:center;
            font-size: 3rem;
            box-shadow:2px 2px hsl(0, 0%, 20%);
            
        }
        .Rbutton {
            width:33.3%;
            height:17.7%;
            background-color: #00008017;
            border:solid;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            cursor: pointer;
            align-self:center;
            font-family: Tahoma, Verdana, "MS Sans Serif", Arial, sans-serif;
            position:absolute;
            top:18%;
            left:50%;
            transform: translate(-50%, -50%);
        }
        .jitter-centered .Rbutton:hover {
            background-color: #00008040;
        }
        .Rbutton:active {
            box-shadow: inset 2px 2px black;
        }
        .TIMER {
            position:absolute;
            top:2.666%;
            left:50%;
            transform: translateX(-50%);
            font-size: 1.4rem;
            font-weight:bold;
            width:98%;
            height:clamp(0.8rem , 1.5rem, 2rem);
            text-align: center;
            background-color:#010169;
            color:white;
            box-shadow:2px 2px black;

        }
        .FAILED {
            position:absolute;
            display:flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%);
            width:50rem;
            aspect-ratio: 2/1.2;
            background:#c0c0c0;
            border-top:2px solid white;
            border-left:2px solid white;
            border-right:2px solid #3a3a3a;
            border-bottom:2px solid #3a3a3a;
            z-index:50;
            filter:blur(0.5px);
            display:none;
            
        }
        .Input {
            width:40%;
            aspect-ratio: 10/1;
            border:2px solid black;
            box-shadow: inset 2px 2px 5px #3a3a3a, inset -2px -2px 5px white;
            font-size: 1.2rem;
            padding:5px;
            position:absolute;
            top:50%;
            left:50%;
            transform: translate(-50%, -50%);
        }
        .jittered {
            animation: jitter 0.15s ease-in infinite;
        }
        .jitter-centered {
            animation: jitter-centered 0.15s ease-in infinite;
        }
        .Casual, .Intermediate, .Challenge {
            align-self:flex-start;
            width:15.204rem;
            height:2.5rem;
            border:2px solid black;
            top:10px;
            cursor:pointer;
            background-color: #00008017;
            border:solid;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            
        }
        .Exponential {
            position:absolute;
            top:125%;
            width:100%;
            border:2px solid black;
            height:2.5rem;
            cursor:pointer;
            background-color: #00008017;
            border:solid;
            border-color: white #3a3a3a #3a3a3a white;
            box-shadow:2px 2px black;
            }
         * {
         font-family: 'Algerian', serif;
        }
        .jittered .Casual:hover,.jittered .Intermediate:hover,.jittered .Challenge:hover,.jittered .Exponential:hover {
            background-color: #00008040;
            animation: jitter 0.1s infinite;
        }
        .Casual:active, .Intermediate:active, .Challenge:active, .Exponential:active {
            box-shadow: inset 2px 2px black;
            transform:translate(-1%,-1%)
        }
        .Difficulties { 
            position:absolute;
            top:-25%;
            left:50%;
            transform:translateX(-50%);
            display:flex;
            gap:10px;
            z-index:2;
            width:fit-content;
        }
        .Difficulties::before{
            content: "SELECT DIFFICULTY";
            position:absolute;
            top:-100%;
            left:50%;
            transform: translate(-50%,-50%);
            white-space:nowrap;
            font-size:2.7rem;
            z-index:3;
            font-weight:bold;
            overflow:visible;
            
        }
        .Overlay {
            width:100vw;
            height:100vh;
            margin:0;
            padding:0;
            background-color: #777777;
            opacity:0.4;
            filter:blur(0.7px);
            z-index:5;
            pointer-events:none;
            position:fixed;
            inset:0;
        }
        @keyframes jitter {
            0%{ transform:translate(-1px, 1px)}
            12.5%{transform:translate(1px, 0px)}
            25%{transform:translate(-1px, -1px)}
            37.5%{transform:translate(0px, 1px)}
            50%{transform:translate(1px, -1px)}
            62.5%{transform:translate(-1px, 0px)}
            75%{transform:translate(1px, 1px)}
            87.5%{transform:translate(0px, -1px)}
            100%{transform:translate(-1px, 1px)}
        }
        @keyframes jitter-centered {
            0%{ transform: translate(-50%, -50%) translate(-2px, 2px); }
            12.5%{ transform: translate(-50%, -50%) translate(2px, 0px); }
            25%{ transform: translate(-50%, -50%) translate(-2px, -2px); }
            37.5%{ transform: translate(-50%, -50%) translate(0px, 2px); }
            50%{ transform: translate(-50%, -50%) translate(2px, -2px); }
            62.5%{ transform: translate(-50%, -50%) translate(-2px, 0px); }
            75%{ transform: translate(-50%, -50%) translate(2px, 2px); }
            87.5%{ transform: translate(-50%, -50%) translate(0px, -2px); }
            100%{ transform: translate(-50%, -50%) translate(-2px, 2px); }
        }
        .Streak {
            position:absolute;
            top:91%;
            left:50%;
            transform:translateX(-50%);
            width:98%;
            text-align:center;
            font-size:1.5rem;
            font-weight:bold;
            background-color:#010169;
            color:white;
            box-shadow:2px 2px black;
            height:clamp(0.8rem , 1.5rem, 2rem);
        }
        .Hasil {
            width:95%;
            height:clamp(0.8rem , 1.5rem, 2rem);
            position:absolute;
            top:55%;
            left:50%;
            transform: translateX(-50%);
            text-align: center;
            font-size:1.5rem;   
            font-family:'Algerian', serif;    
        }       
         .DONE{
            font-size: 1rem;
            text-align:left;
            background-color:#000080d5;
            width: 98%;
            color:white;
            box-shadow:2px 2px black;
            padding-left:0.4rem
            
        }
        .Main-content {
            width:100%;
            flex:1;
            display:flex;
            flex-direction: column;
            background:#c0c0c0;
        }
        .Settings-Section1, .Settings-Section2 {
            width:100%;
            background:#c0c0c0;
            display:flex;
            flex-direction: column;
            justify-content:flex-start;
        }
        .control1 {
            display:flex;
            flex-direction: column;
            font-size:1.5rem;
            gap:1rem;
            flex:1
        }
        .Settings-Section1 {
            height: 60%;
        }
        .Settings-Section2 {
            height: 40%;
        }
        .Onoff {
            height:100%;
            width:5rem;
            background:#c0c0c0;
            border-top:2px solid white;
            border-left:2px solid white;
            border-right:2px solid #3a3a3a;
            border-bottom:2px solid #3a3a3a;
            box-shadow:2px 2px black;
            cursor: pointer;
            margin-left:1rem;
        }
        @media (max-width: 768px) {
            .Pamphlet {
                width:90vw;
                aspect-ratio: 2/1.2;
            }
            .N1, .N2 {
                font-size: 2rem;
                width:27.5%;
                aspect-ratio: 1/1;
            }
            .V1::before {
                font-size: 3rem;
            }
            .Rbutton {
                width:30%;
                height:1.5rem;
                font-size: 0.8rem;
                top:12.5%
            }
            .Input {
                width:60%;
                height:10%;
                font-size: 1rem;
            }
            .TIMER, .Streak {
                font-size: 0.75rem;
                height:0.8rem
            }
            .Hasil {
                font-size: 0.8rem;
                top:52%
            }
            .Difficulties::before {
                font-size: 1.5rem;
            }
            .Difficulties {
                gap:5px;
                top: -40%
            }
            .Casual, .Intermediate, .Challenge {
                width:30vw;
                height:1.9rem;
                font-size: 0.8rem;
            }
            .Exponential {
                width:100%;
                height:1.9rem;
                font-size: 0.8rem;
            }
            @media (max-width: 400px) {
                
                .Casual, .Intermediate, .Challenge {
                    width:28vw;
                    height:25px;
                    font-size: 0.59rem;
                }
                .Exponential {
                    height:25px;
                    font-size: 0.59rem;
                    width:100%;
                }
                .V1::before {
                    font-size: 2rem;
                }
            }
            @media (orientation: landscape){
                .Pamphlet {
                    width:95vw;
                    height:55vh;
                    top:90%;
                }
                .N1, .N2 {
                    font-size: 1.5rem;
                    width:25%;
                    aspect-ratio: 1/1;
                }
                .Rbutton {
                    width:25%;
                    height:1.2rem;
                    font-size: 0.7rem;
                    top:15%
                }
                .Input {
                    width:50%;
                    height:8%;
                    font-size: 0.8rem;
                }
                .Hasil {
                    font-size: 0.7rem;
                    top:50%
                }
            }
        }
    </style>
    </head>
    <body>
        <div class="Overlay"></div>
        
        <div class="Pamphlet">
            <div class="Difficulties">
            <button class="Casual">CASUAL</button>
            <button class="Intermediate">INTERMEDIATE</button>
            <button class="Challenge">CHALLENGE</button>
            <button class="Exponential">EXPONENTIAL</button>
        </div>
            <div class="Streak">STREAK:</div>
            <div class="sec1">
                <div class="TIMER">TIME LEFT:</div>
                <div class="V1"><div class="N1"></div></div>
                <div class="V2"><div class="N2"></div></div>
            </div>
             <div class="sec2">
                <button class="Rbutton">START</button>
               <input class="Input" autofocus placeholder="Type your answer here">
               <p class="Hasil"></p>
            </div>
        </div>
        <div class="FAILED">
           <div class="DONE"> <h1 style="margin:0;">SETTINGS</h1></div>
           <div class="Main-content">
            <div class="Settings-Section1">
                <div class="control1">
                <div class="toggle-jitter">Allow Jitter:<input id="AJB"class="Onoff" type="checkbox"></div>
                <div class="toggle-Overlay">Allow Overlay:<button id="AOB" class="Onoff"></button></div>
                <div class="toggle-negative">Allow Negative:<button id="ANB" class="Onoff"></button></div>
                <div class="toggle-decimal">Allow Decimal:<button id="ADB" class="Onoff"></button></div>
            </div>
            </div>
            <div class="Settings-Section2"></div>
           </div>
        </div>
        <script>
            const body = document.body;
            const Casual = document.querySelector('.Casual')
            const Intermediate = document.querySelector('.Intermediate')
            const Challenge = document.querySelector('.Challenge')
            const Exponential = document.querySelector('.Exponential')
            const Input = document.querySelector(".Input")
            const Rbutton = document.querySelector(".Rbutton")
            const hasil = document.querySelector(".Hasil")
            const TIMER = document.querySelector('.TIMER')
            const SD = document.querySelector('.Streak')
            const AJ = document.getElementById('AJB')
            const AO = document.getElementById('AOB')
            const AN = document.getElementById('ANB')
            const AD = document.getElementById('ADB')
            const DiffButtons = document.querySelector('.Casual .Intermediate .Challenge .Exponential')
            let AllowJitter = false;
            let AllowOverlay = false;
            let Difficulty = "None"
            let time = 10;
            let Streak = 0;
            Input.disabled = true;
            let CIC = 1
            let NOO = 0
            let s123 = 7
            Casual.addEventListener("click", ()=>{
                Difficulty = "Casual"
                Rbutton.disabled = false
            })
            Intermediate.addEventListener("click", ()=>{
                Difficulty = "Intermediate"
                Rbutton.disabled = false
            })
            Challenge.addEventListener("click", ()=>{
                Difficulty = "Challenge"
                Rbutton.disabled = false
            })
            Exponential.addEventListener("click", ()=>{
                Difficulty = "Exponential"
                Rbutton.disabled = false
            })
            Rbutton.disabled = CIC < 2
            function Exponentia() {
                if (Streak === 0){
                    CIC = 4
                    NOO = 500
                    return
                }        
                CIC = Math.floor(Math.pow(2, Math.floor(Number(Streak/s123)) + 2))
                NOO = 500 + Streak * 50
            }
            function DIFFICULTY()  {
                if (Difficulty === "Casual") {
                    CIC = 25
                    NOO = 1000
                } else if (Difficulty === "Intermediate") {
                    CIC = 50
                    NOO = 1500
                } else if (Difficulty === "Challenge") {
                    CIC = 100
                    NOO = 2000
                } else if (Difficulty === "Exponential") {
                    Exponentia()
                }
            }
            function Randoms() {
                    const N1 = document.querySelector('.N1');
                    const N2 = document.querySelector('.N2');
                    N1.style.opacity = "1";
                    N2.style.opacity = "1";
                    const rando = Math.floor(Math.random() * CIC);
                    const rando2 = Math.floor(Math.random() * CIC) + 1;
                    N1.textContent = `${rando}`;
                    N2.textContent = `${rando2}`;
                    answer = rando * rando2;
                    setTimeout(() => {
                        N1.textContent = "?";
                        N2.textContent = "?";
                    }, NOO);
            }
            let answer;
            let timer;
            let counter = false;
            AJ.addEventListener("change", () => {
                if (AJ.checked) {
                    body.classList.toggle("jittered", AllowJitter);
                    body.classList.toggle("jitter-centered", AllowJitter);
                }
            });

                Rbutton.addEventListener("click", () => {
                    Input.classList.add("jittered-centered");
                    counter = true;
                    if (timer) {clearInterval(timer)}
                    Rbutton.textContent = "SUBMIT"
                    Rbutton.disabled = true;
                    Input.disabled = true;
                    if (Difficulty === "Challenge") 
                    {time = 15}
                    else if (Difficulty === "Exponential") 
                    {time = 10 + Math.floor(Number(Streak/s123)) * 2}
                    else {time = 10}
                    DIFFICULTY()
                    const Vinput = parseFloat(Input.value)
                    if (counter === true) {
                        if (Vinput === answer) {
                            hasil.textContent = "CORRECT!"
                            if (Difficulty !== "Exponential"){Streak++;}
                            else {Streak = Streak + 1 + Math.floor(Number(Streak)/s123);}
                            SD.textContent = `STREAK: ${Streak}`
                        } else {
                            hasil.textContent = `WRONG! The correct answer was ${answer}.`
                            Input.disabled = true
                            TIMER.textContent = `GAME OVER`
                            Streak = 0;
                            Rbutton.textContent = "RESTART"
                            SD.textContent = ""
                        }
                    }
                    Timer()
                    setTimeout(() => {
                        Randoms()
                        Input.value = ""        
                        hasil.textContent = ""
                        Rbutton.disabled = false
                        Input.disabled = false
                        Input.focus()
                        Rbutton.textContent = "SUBMIT"
                    }, 1000)
                    
                })
                Input.addEventListener("keydown", (event ) => {
                    if (event.key !== "Enter") return;
                    if (timer) {clearInterval(timer)}
                    Rbutton.textContent = "SUBMIT"
                    Rbutton.disabled = true;
                    Input.disabled = true;
                    if (Difficulty === "Challenge") 
                    {time = 15}
                    else if (Difficulty === "Exponential") 
                    {time = 10 + Math.floor(Number(Streak/s123)) * 2}
                    else {time = 10}
                    DIFFICULTY()
                    Timer()
                    const Vinput = parseFloat(Input.value)
                    if (counter > 0) {
                        if (Vinput === answer) {
                            hasil.textContent = "CORRECT!"
                            if (Difficulty !== "Exponential"){Streak++;}
                            else {Streak = Streak + 1 + Math.floor(Number(Streak)/s123);}
                            SD.textContent = `STREAK: ${Streak}`
                        } else {
                            hasil.textContent = `WRONG! The correct answer was ${answer}.`
                            Input.disabled = true
                            TIMER.textContent = `GAME OVER`
                            Streak = 0;
                            Rbutton.textContent = "RESTART"
                            SD.textContent = ""
                        }
                    }
                    setTimeout(() => {
                        Randoms()
                        Input.value = ""        
                        hasil.textContent = ""
                        Rbutton.disabled = false
                        Input.disabled = false
                        Input.focus()
                        Rbutton.textContent = "SUBMIT"
                    }, 1000)
                    
                })
            function Timer() { 
                timer = setInterval(()=>{
                    TIMER.textContent = `TIME LEFT: ${time}s`
                    time--;
                    if (time < 0) {  
                        clearInterval(timer)
                        TIMER.textContent = `Time's Up! The correct answer was ${answer}.`
                       Input.disabled = true
                       Streak = 0;
                        setTimeout(() => {
                            if (Difficulty === "Challenge") 
                            {time = 15}
                            else if (Difficulty === "Exponential") 
                            {time = 10 + Math.floor(Number(Streak/s123)) * 2}
                             else {time = 10}
                            Input.value = ""
                            hasil.textContent = ""
                            Rbutton.disabled = false
                            Rbutton.textContent = "RESUME"
                        }, 1000)
                    }
                }, 1000) 
            }
            
        </script>
    </body>
</html> 
